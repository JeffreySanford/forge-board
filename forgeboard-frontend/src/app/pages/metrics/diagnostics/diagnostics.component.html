<div class="layout-container" [class.hide-border]="!showLayoutBorder">
  <div class="fieldset-label layout-label" *ngIf="showLayoutBorder">layout container</div>
  <!-- Layout border with center lines -->
  <div class="layout-border" *ngIf="showLayoutBorder">
    <div class="center-line-h"></div>
    <div class="center-line-v"></div>
  </div>
  
  <!-- Tile grid container -->
  <div class="tile-grid-container" [class.hide-border]="!showLayoutBorder">
    <div class="fieldset-label tilegrid-label" *ngIf="showLayoutBorder">tile grid container</div>
    <div
      class="tile-grid"
      cdkDropList
      cdkDropListOrientation="horizontal"
      [cdkDropListData]="tileOrder"
      (cdkDropListDropped)="onTileDrop($event)"
    >
      <!-- Metrics tile - updated selector -->
      <div
        *ngIf="showMetricsTile"
        cdkDrag
        class="tile-drag"
        [cdkDragData]="'metrics'"
      >
        <div class="tile-drag-handle" cdkDragHandle>
          <mat-icon>drag_indicator</mat-icon> Metrics
          <button class="tile-visibility-toggle" (click)="toggleTileVisibility('metrics')">
            <mat-icon>{{ showMetricsTile ? 'visibility' : 'visibility_off' }}</mat-icon>
          </button>
        </div>
        <!-- Placeholder for drag preview -->
        <div *cdkDragPlaceholder class="tile-placeholder">
          <div class="placeholder-content">Metrics</div>
        </div>
      </div>
      
      <!-- Connection tile -->
      <div 
        cdkDrag 
        class="tile-drag"
        [cdkDragData]="'connection'"
      >
        <div class="tile-drag-handle" cdkDragHandle>
          <mat-icon>drag_indicator</mat-icon> Connection
          <button class="tile-visibility-toggle" (click)="toggleTileVisibility('connection')">
            <mat-icon>visibility</mat-icon>
          </button>
        </div>
        <app-connection-status></app-connection-status>
        <!-- Placeholder for drag preview -->
        <div *cdkDragPlaceholder class="tile-placeholder">
          <div class="placeholder-content">Connection</div>
        </div>
      </div>
      
      <!-- Logs tile -->
      <div 
        cdkDrag 
        class="tile-drag"
        [cdkDragData]="'logs'"
      >
        <div class="tile-drag-handle" cdkDragHandle>
          <mat-icon>drag_indicator</mat-icon> Logs
          <button class="tile-visibility-toggle" (click)="toggleTileVisibility('logs')">
            <mat-icon>visibility</mat-icon>
          </button>
        </div>
        <app-recent-logs></app-recent-logs>
        <!-- Placeholder for drag preview -->
        <div *cdkDragPlaceholder class="tile-placeholder">
          <div class="placeholder-content">Logs</div>
        </div>
      </div>
      
      <!-- Uptime tile -->
      <div 
        cdkDrag 
        class="tile-drag"
        [cdkDragData]="'uptime'"
      >
        <div class="tile-drag-handle" cdkDragHandle>
          <mat-icon>drag_indicator</mat-icon> Uptime
          <button class="tile-visibility-toggle" (click)="toggleTileVisibility('uptime')">
            <mat-icon>visibility</mat-icon>
          </button>
        </div>
        <app-uptime-summary></app-uptime-summary>
        <!-- Placeholder for drag preview -->
        <div *cdkDragPlaceholder class="tile-placeholder">
          <div class="placeholder-content">Uptime</div>
        </div>
      </div>
      
      <!-- Activity tile -->
      <div 
        cdkDrag 
        class="tile-drag"
        [cdkDragData]="'activity'"
      >
        <div class="tile-drag-handle" cdkDragHandle>
          <mat-icon>drag_indicator</mat-icon> Activity
          <button class="tile-visibility-toggle" (click)="toggleTileVisibility('activity')">
            <mat-icon>visibility</mat-icon>
          </button>
        </div>
        <app-activity-feed></app-activity-feed>
        <!-- Placeholder for drag preview -->
        <div *cdkDragPlaceholder class="tile-placeholder">
          <div class="placeholder-content">Activity</div>
        </div>
      </div>
    </div>
  </div>
</div>
